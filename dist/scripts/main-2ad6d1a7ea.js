function isUrl(e){return/^(f|ht)tps?:\/\//i.test(e)}function checkLink(e,t){if(t&&isUrl(t))return t;if(t)switch(e){case"twitter":return t.indexOf("@")>=0?"https://twitter.com/"+t.replace("@",""):"https://twitter.com/"+t;case"googleplus":return t.indexOf("+")>=0?"https://plus.google.com/u/0/+"+t.replace("+",""):"https://plus.google.com/u/0/+"+t;case"github":return"https://github.com/"+t;default:return'<a href="'+t+'" target="_NEW">'+t+"</a>"}}function sortBySpeakerName(e,t){var s=e.firstname.toLowerCase(),a=t.firstname.toLowerCase();return s<a?-1:s>a?1:0}var getUrlParameter=function(e){var t,s,a=decodeURIComponent(window.location.search.substring(1)),i=a.split("&");for(s=0;s<i.length;s++)if(t=i[s].split("="),t[0]===e)return void 0===t[1]||t[1]},getTrackColor=function(e){switch(e){case"web":return"color-bg-web devfest-chip";case"cloud":return"color-bg-cloud devfest-chip";case"mobile":return"color-bg-mobile devfest-chip";case"discovery":return"color-bg-discovery devfest-chip";default:return"color-bg-default devfest-chip"}},getTypeColor=function(e){switch(e){case"conference":return"color-bg-conference devfest-chip";case"codelab":return"color-bg-codelab devfest-chip";case"quickie":return"color-bg-quickie devfest-chip";default:return"color-bg-default devfest-chip"}},getTimeLabel=function(e){switch(e){case"keynote":return"50 min";case"repas":return"1 h";case"conference":return"50 min";case"codelab":return"2 h";case"quickie":return"20 min";case"after":return"1 h";case"café":return"15 min";default:return"50 min"}};getRoomLabel=function(e){switch(e){case 1:return"en"===language?"Room Titan":"Salle Titan";case 2:return"en"===language?"Room Belem":"Salle Belem";case 3:return"en"===language?"Room Tour de Bretagne":"Salle Tour de Bretagne";case 4:return"en"===language?"Room Graslin":"Salle Graslin";case 5:return"en"===language?"Room Les Machines":"Salle Les machines";case 6:return"en"===language?"Room Tour LU":"Salle Tour LU";case 7:return"en"===language?"Room le Château":"Salle le Château";case 8:return"Mezzanine & Hall";default:return"Cité des congrès"}};var getDayLabel=function(e){switch(e){case 2:return"en"===language?"Thursday, November 10th":"Jeudi 10 novembre";case 1:return"en"===language?"Wednesday, November 9th":"Vendredi 10 mars"}},getHourLabel=function(e,t,s){switch(e){case 1:return s.day1.filter(function(e){return e.id===parseInt(t)})[0].label;case 2:return s.day2.filter(function(e){return e.id===parseInt(t)})[0].label}},getDifficultyLabel=function(e){switch(e){case 1:return"en"===language?"Level beginner":"Niveau débutant";case 2:return"en"===language?"Level intermediate":"Niveau intermédiaire";case 3:return"en"===language?"Level advanced":"Niveau avancé";default:return"en"===language?"Level beginner":"Niveau débutant"}},getLangLabel=function(e){switch(e){case"en":return"en"===language?"English":"Anglais";default:return"en"===language?"French":"Français"}},getSpeakers=function(e,t){for(var s="",a=0;a<e.length;a++)e.length>1&&a>0&&a<=e.length-1&&(s+=" & "),s+=getSpeaker(e[a],t);return s},getSpeaker=function(e,t){var s=t.filter(function(t){return t.id===e})[0];return getSpeakerLabel(s)},getSpeakerPhoto=function(e,t){var s=t.filter(function(t){return t.id===e})[0];return"/images/speakers/"+s.photo},getSpeakerLabel=function(e){var t=null!==e.company?" ("+e.company+")":"";return e.firstname+" "+e.name+t},getSessionByDayHour=function(e,t,s){const a=s.filter(function(s){return s.agenda&&s.agenda.day===e&&s.agenda.hour===t});return a.sort(function(e,t){return"conference"===e.type&&"conference"!==t.type?-1:"conference"!==e.type&&"conference"===t.type?1:0}),a},isFavorite=function(e,t){return!!t&&t.indexOf(e.toString())!==-1},toggleFavorite=function(e,t,s,a){var i=s.indexOf(e.toString());return i===-1||t?t&&s.push(e.toString()):s.splice(i,1),a?fetch("/api/v1/stars/put?login="+a+"&favs="+JSON.stringify(s)).then(function(e){}):localStorage.fav=JSON.stringify(s),s};const favoriteTemplate='<span class="devfest-favorite" v-on:click="toggleFavorite"><span v-if="active" class="devfest-favorite-active"><i class="material-icons">favorite</i></span><span v-else class="devfest-favorite-unactive"><i class="material-icons">favorite_border</i></span></span>';var Favorite=Vue.extend({props:{sid:Number,active:{type:Boolean,"default":!1}},template:favoriteTemplate,methods:{toggleFavorite:function(e){e.stopPropagation(),this.$dispatch("toggle-favorite",this.sid,!this.active),this.active=!this.active}}});Vue.component("favorite",Favorite);const agendaSlotTemplate='<div class="devfest-agenda-card" onClick="location.href=\'./session.html?id={{session.id}}\';"><div class="devfest-agenda-card-avatars mdl-cell--hide-phone">  <img v-if="session.image" :src="session.image" class="devfest-agenda-card-img" />  <img v-if="session.speaker" v-for="speaker in session.speaker" :src="this.getSpeakerPhoto(speaker, this.$root.speakers)" class="devfest-agenda-card-img" /></div><div class="devfest-agenda-card-content">  <span class="devfest-agenda-card-content-session mdl-typography--font-light">{{ session.name }}</span>  <div class="devfest-agenda-card-content-speaker  mdl-typography--font-light" v-if="session.speaker">    {{ this.getSpeakers(session.speaker, this.$root.speakers) }}  </div>  <div class="devfest-agenda-card-content-info-tags">    <span v-if="session.track" class={{this.getTrackColor(session.track)}}>{{ session.track }}</span>    <span v-if="session.type" class={{this.getTypeColor(session.type)}}>{{ session.type }}</span>    <span v-if="session.type" class="devfest-chip color-bg-default">{{this.getTimeLabel(session.type)}}</span>  </div></div><div style="align-self:flex-start"><favorite :sid="session.id" :active="isFavorite(session.id, favorites)" ></favorite></div></div>';var AgendaSlot=Vue.extend({props:{favorites:Array,session:Object},template:agendaSlotTemplate,methods:{getTrackColor:getTrackColor,getTypeColor:getTypeColor,getTimeLabel:getTimeLabel,getSpeakers:getSpeakers,isFavorite:isFavorite,getSpeakerPhoto:getSpeakerPhoto,getRoomLabel:getRoomLabel}});Vue.component("agenda-slot",AgendaSlot);const sessionCardTemplate='<div class="devfest-session-card mdl-color--white shadowLight">  <div class="devfest-session-card-title">    <h4 v-if="displayTitle" class="mdl-card__title-text">{{ session.name }}</h4>    <favorite :sid="session.id" :active="fav" ></favorite>  </div>  <span v-if="displayTitle" class={{this.getTrackColor(session.track)}}>{{ session.track }}</span>  <span v-if="session.type" class={{this.getTypeColor(session.type)}}>{{ session.type }}</span>  <span class="devfest-chip color-bg-default">{{this.getDayLabel(session.agenda.day)}}</span>  <span class="devfest-chip color-bg-default">{{this.getHourLabel(session.agenda.day, session.agenda.hour, agenda)}}</span>  <span v-if="session.agenda.room" class="devfest-chip color-bg-default">{{this.getRoomLabel(session.agenda.room)}}</span>  <span v-if="session.type" class="devfest-chip color-bg-default">{{this.getTimeLabel(session.type)}}</span>  <span class="devfest-chip color-bg-default">{{this.getLangLabel(session.lang)}}</span>  <span v-if="session.difficulty" class="devfest-chip color-bg-default">{{this.getDifficultyLabel(session.difficulty)}}</span>  <div class="devfest-session-desc mdl-typography--font-light">    {{{session.description}}}  </div></div>';var SessionCard=Vue.extend({props:{agenda:Object,session:Object,fav:{type:Boolean,"default":!1},displayTitle:{type:Boolean,"default":!0}},template:sessionCardTemplate,components:{favorite:Favorite},methods:{getTimeLabel:getTimeLabel,getDayLabel:getDayLabel,getHourLabel:getHourLabel,getTrackColor:getTrackColor,getTypeColor:getTypeColor,getDifficultyLabel:getDifficultyLabel,getLangLabel:getLangLabel,getRoomLabel:getRoomLabel}});Vue.component("session-card",SessionCard);const agendaTemplate='<div class="devfest-agenda2-hour-line" v-for="hour in hours">  <div class="devfest-agenda2-hour-col mdl-typography--font-light">    <span class="devfest-chip color-bg-default">{{hour.label}}</span>    <div class="devfest-agenda2-hour-line">&nbsp;</div>  </div>  <div class="devfest-agenda2-hour-content">   <agenda-slot v-for="session in this.getSessionByDayHour(parseInt(day), hour.id, this.sessions)" :session="session" :favorites="favorites"></agenda-slot>  </div></div>';var Agenda=Vue.extend({props:["day","hours","sessions","favorites"],components:{"agenda-slot":AgendaSlot},template:agendaTemplate,methods:{getSessionByDayHour:getSessionByDayHour}});Vue.component("agenda",Agenda);const socialChipTemplate="<span class={{this.getSocialClass(type)}}>{{{ this.getSocialContent(type, value) }}}</span>";var SocialChip=Vue.extend({props:{type:String,value:String},template:socialChipTemplate,methods:{getSocialClass:function(e){switch(e){case"twitter":return"devfest-chip color-bg-twitter";case"googleplus":return"devfest-chip color-bg-googleplus";case"github":return"devfest-chip color-bg-github";case"linkedin":return"devfest-chip color-bg-linkedin";case"blog":return"devfest-chip color-bg-blog"}},getSocialContent:function(e,t){switch(e){case"twitter":return'<a id="devfest-chip" href="'+checkLink(e,t)+'" target="_NEW">Twitter</a>';case"googleplus":return'<a id="devfest-chip" href="'+checkLink(e,t)+'" target="_NEW">G+</a>';case"github":return'<a id="devfest-chip" href="'+checkLink(e,t)+'" target="_NEW">GitHub</a>';case"linkedin":return'<a id="devfest-chip" href="'+checkLink(e,t)+'" target="_NEW">Linkedin</a>';case"blog":return'<a id="devfest-chip" href="'+checkLink(e,t)+'" target="_NEW">Blog</a>'}}}});Vue.component("social-chip",SocialChip);const speakerCardTemplate='<div class="devfest-speaker-card shadowLight" v-on:click="goToSpeakerPage($event, speaker.id)"><div class="mdl-cell--hide-phone">  <img v-if="speaker.photo" :src="\'/images/speakers/\' + speaker.photo" class="devfest-speaker-card-img" /></div><div class="devfest-speaker-card-content">  <div class="devfest-speaker-card-title">    <img v-if="speaker.photo" :src="\'/images/speakers/\' + speaker.photo" class="devfest-speaker-card-img-sm mdl-cell--hide-tablet mdl-cell--hide-desktop" />    <div>      <h5>{{ speaker.firstname }} {{ speaker.name }}</h5>      <h6 v-if="speaker.company">{{ speaker.company }}</h6>    </div>    <div style="position: relative">      <social-chip v-if="speaker.social.twitter" type="twitter" :value="speaker.social.twitter"></social-chip>      <social-chip v-if="speaker.social.googleplus" type="googleplus" :value="speaker.social.googleplus"></social-chip>      <social-chip v-if="speaker.social.github" type="github" :value="speaker.social.github"></social-chip>      <social-chip v-if="speaker.social.linkedin" type="linkedin" :value="speaker.social.linkedin"></social-chip>      <social-chip v-if="speaker.social.blog" type="blog" :value="speaker.social.blog"></social-chip>    </div>  </div>  <div class="mdl-typography--font-light">{{{ speaker.bio }}}</div></div></div>';var SpeakerCard=Vue.extend({props:{speaker:Object},components:{"social-chip":SocialChip},template:speakerCardTemplate,methods:{goToSpeakerPage:function(e,t){e.stopPropagation(),"devfest-chip"!==e.target.id&&(location.href="speaker.html?id="+t)}}});Vue.component("speaker-card",SpeakerCard);var speakerId=getUrlParameter("id"),speakerVue=new Vue({el:"#speakerVue",data:{agenda:null,sessions:null,speaker:null,favorites:[]},ready:function(){this.fetchData()},methods:{fetchData:function(){var e=this;fetch("/assets/devfest.json").then(function(e){return e.json()}).then(function(t){e.agenda=t.agenda;var s=t.speakers.filter(function(e){return e.id===parseInt(speakerId)})[0];e.speaker=s,s&&(e.sessions=t.sessions.filter(function(e){return e.speaker&&e.speaker.indexOf(parseInt(speakerId))!==-1}))});var t=localStorage.userid;t?fetch("/api/v1/stars/get?login="+t).then(function(e){return e.json()}).then(function(t){e.favorites=t.favs||[]}):e.favorites=JSON.parse(localStorage.fav)||[]},getTrackColor:getTrackColor,getTypeColor:getTypeColor,isFavorite:isFavorite},events:{"toggle-favorite":function(e,t){var s=localStorage.userid;toggleFavorite(e,t,this.favorites,s)}}}),speakersVue=new Vue({el:"#speakersVue",data:{speakers:null},ready:function(){this.fetchData()},methods:{fetchData:function(){var e=this;fetch("/assets/devfest.json").then(function(e){return e.json()}).then(function(t){e.speakers=t.speakers.sort(sortBySpeakerName)})}}}),agendaVue=new Vue({el:"#agendaVue",data:{displayedSessions:null,sessions:null,speakers:null,agenda:null,favorites:[],typeFilters:["keynote","conference","codelab","quickie"],curTypeFilters:[],trackFilters:["web","cloud","mobile","discovery"],curTrackFilters:[],curFavoriteFilter:[],day1:!1,day2:!1},ready:function(){this.fetchData()},watch:{curTypeFilters:"filter",curTrackFilters:"filter",curFavoriteFilter:"filter"},methods:{fetchData:function(){var e=this;fetch("/assets/devfest.json").then(function(e){return e.json()}).then(function(t){e.sessions=t.sessions,e.displayedSessions=t.sessions,e.speakers=t.speakers,e.agenda=t.agenda});var t=localStorage.userid;t?fetch("/api/v1/stars/get?login="+t).then(function(e){return e.json()}).then(function(t){e.favorites=t.favs||[]}):e.favorites=localStorage.fav&&JSON.parse(localStorage.fav)||[]},getTypeColor:getTypeColor,getTrackColor:getTrackColor,filter:function(){var e=this,t=this.sessions;this.curTypeFilters.length>0&&(t=t.filter(function(t){return e.curTypeFilters.indexOf(t.type)!==-1})),this.curTrackFilters.length>0&&(t=t.filter(function(t){return e.curTrackFilters.indexOf(t.track)!==-1})),this.curFavoriteFilter.length>0&&(t=t.filter(function(t){return e.favorites.indexOf(t.id.toString())!==-1})),this.displayedSessions=t}},events:{"toggle-favorite":function(e,t){var s=localStorage.userid;toggleFavorite(e,t,this.favorites,s),this.filter()}}}),sessionId=getUrlParameter("id"),sessionVue=new Vue({el:"#sessionVue",data:{agenda:null,session:null,speakers:null,favorites:[]},ready:function(){this.fetchData()},methods:{fetchData:function(){var e=this;fetch("/assets/devfest.json").then(function(e){return e.json()}).then(function(t){if(e.agenda=t.agenda,e.session=t.sessions.filter(function(e){return e.id===parseInt(sessionId)})[0],e.session){var s=e.session.speaker;e.session.speaker&&(e.speakers=t.speakers.filter(function(e){return s.indexOf(parseInt(e.id))!==-1}))}});var t=localStorage.userid;t?fetch("/api/v1/stars/get?login="+t).then(function(e){return e.json()}).then(function(t){e.favorites=t.favs||[]}):e.favorites=JSON.parse(localStorage.fav)||[]},getTrackColor:getTrackColor,getTypeColor:getTypeColor,isFavorite:isFavorite},events:{"toggle-favorite":function(e,t){var s=localStorage.userid;toggleFavorite(e,t,this.favorites,s)}}});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInV0aWxzLmpzIiwic29jaWFsLWNoaXAuanMiLCJzcGVha2Vycy5qcyIsImZhdm9yaXRlLmpzIiwiYWdlbmRhLXNsb3QuanMiLCJzZXNzaW9uLWNhcmQuanMiLCJhZ2VuZGEuanMiLCJzcGVha2VyLWNhcmQuanMiLCJzcGVha2VyLmpzIiwic2Vzc2lvbi5qcyJdLCJuYW1lcyI6WyJpc1VybCIsInVybCIsInRlc3QiLCJjaGVja0xpbmsiLCJ0eXBlIiwidmFsdWUiLCJpbmRleE9mIiwicmVwbGFjZSIsInNvcnRCeVNwZWFrZXJOYW1lIiwiYSIsImIiLCJuYW1lQSIsImZpcnN0bmFtZSIsInRvTG93ZXJDYXNlIiwibmFtZUIiLCJnZXRVcmxQYXJhbWV0ZXIiLCJzUGFyYW0iLCJzUGFyYW1ldGVyTmFtZSIsImkiLCJzUGFnZVVSTCIsImRlY29kZVVSSUNvbXBvbmVudCIsIndpbmRvdyIsImxvY2F0aW9uIiwic2VhcmNoIiwic3Vic3RyaW5nIiwic1VSTFZhcmlhYmxlcyIsInNwbGl0IiwibGVuZ3RoIiwidW5kZWZpbmVkIiwiZ2V0VHJhY2tDb2xvciIsInRyYWNrIiwiZ2V0VHlwZUNvbG9yIiwiZ2V0VGltZUxhYmVsIiwiZ2V0Um9vbUxhYmVsIiwiaWQiLCJsYW5ndWFnZSIsImdldERheUxhYmVsIiwiZGF5IiwiZ2V0SG91ckxhYmVsIiwiaG91ciIsImFnZW5kYSIsImRheTEiLCJmaWx0ZXIiLCJoIiwicGFyc2VJbnQiLCJsYWJlbCIsImRheTIiLCJnZXREaWZmaWN1bHR5TGFiZWwiLCJkaWZmaWN1bHR5IiwiZ2V0TGFuZ0xhYmVsIiwibGFuZyIsImdldFNwZWFrZXJzIiwic3BlYWtlcnNJZCIsInNwZWFrZXJzIiwiZ2V0U3BlYWtlciIsInNwZWFrZXIiLCJzIiwiZ2V0U3BlYWtlckxhYmVsIiwiZ2V0U3BlYWtlclBob3RvIiwicGhvdG8iLCJjb21wYW55IiwibmFtZSIsImdldFNlc3Npb25CeURheUhvdXIiLCJzZXNzaW9ucyIsInNvcnQiLCJpc0Zhdm9yaXRlIiwiZmF2cyIsInRvU3RyaW5nIiwidG9nZ2xlRmF2b3JpdGUiLCJmYXZvcml0ZSIsImZhdm9yaXRlcyIsInVzZXJMb2dnZWQiLCJpbmRleCIsInB1c2giLCJzcGxpY2UiLCJmZXRjaCIsIkpTT04iLCJzdHJpbmdpZnkiLCJ0aGVuIiwicmVzcG9uc2UiLCJsb2NhbFN0b3JhZ2UiLCJmYXZvcml0ZVRlbXBsYXRlIiwiRmF2b3JpdGUiLCJWdWUiLCJleHRlbmQiLCJwcm9wcyIsInNpZCIsIk51bWJlciIsImFjdGl2ZSIsIkJvb2xlYW4iLCJkZWZhdWx0IiwidGVtcGxhdGUiLCJtZXRob2RzIiwiZXZlbnQiLCJzdG9wUHJvcGFnYXRpb24iLCJ0aGlzIiwiJGRpc3BhdGNoIiwiY29tcG9uZW50IiwiYWdlbmRhU2xvdFRlbXBsYXRlIiwiQWdlbmRhU2xvdCIsIkFycmF5Iiwic2Vzc2lvbiIsIk9iamVjdCIsInNlc3Npb25DYXJkVGVtcGxhdGUiLCJTZXNzaW9uQ2FyZCIsImZhdiIsImRpc3BsYXlUaXRsZSIsImNvbXBvbmVudHMiLCJhZ2VuZGFUZW1wbGF0ZSIsIkFnZW5kYSIsImFnZW5kYS1zbG90Iiwic29jaWFsQ2hpcFRlbXBsYXRlIiwiU29jaWFsQ2hpcCIsIlN0cmluZyIsImdldFNvY2lhbENsYXNzIiwiZ2V0U29jaWFsQ29udGVudCIsInNwZWFrZXJDYXJkVGVtcGxhdGUiLCJTcGVha2VyQ2FyZCIsInNvY2lhbC1jaGlwIiwiZ29Ub1NwZWFrZXJQYWdlIiwidGFyZ2V0IiwiaHJlZiIsInNwZWFrZXJJZCIsInNwZWFrZXJWdWUiLCJlbCIsImRhdGEiLCJyZWFkeSIsImZldGNoRGF0YSIsInNlbGYiLCJqc29uIiwidXNlcmlkIiwicGFyc2UiLCJldmVudHMiLCJ0b2dnbGUtZmF2b3JpdGUiLCJzcGVha2Vyc1Z1ZSIsImFnZW5kYVZ1ZSIsImRpc3BsYXllZFNlc3Npb25zIiwidHlwZUZpbHRlcnMiLCJjdXJUeXBlRmlsdGVycyIsInRyYWNrRmlsdGVycyIsImN1clRyYWNrRmlsdGVycyIsImN1ckZhdm9yaXRlRmlsdGVyIiwid2F0Y2giLCJyZXN1bHQiLCJzZXNzaW9uSWQiLCJzZXNzaW9uVnVlIiwic2Vzc2lvblNwZWFrZXJzIl0sIm1hcHBpbmdzIjoiQUFpQkEsUUFBQUEsT0FBQUMsR0FDQSxNQUFBLG9CQUFBQyxLQUFBRCxHQzBCQSxRQUFBRSxXQUFBQyxFQUFBQyxHQUNBLEdBQUFBLEdBQUFMLE1BQUFLLEdBQ0EsTUFBQUEsRUFFQSxJQUFBQSxFQUNBLE9BQUFELEdBQ0EsSUFBQSxVQUNBLE1BQUFDLEdBQUFDLFFBQUEsTUFBQSxFQUFBLHVCQUFBRCxFQUFBRSxRQUFBLElBQUEsSUFBQSx1QkFBQUYsQ0FDQSxLQUFBLGFBQ0EsTUFBQUEsR0FBQUMsUUFBQSxNQUFBLEVBQUEsZ0NBQUFELEVBQUFFLFFBQUEsSUFBQSxJQUFBLGdDQUFBRixDQUNBLEtBQUEsU0FDQSxNQUFBLHNCQUFBQSxDQUNBLFNBQ0EsTUFBQSxZQUFBQSxFQUFBLG1CQUFBQSxFQUFBLFFDaENBLFFBQUFHLG1CQUFBQyxFQUFBQyxHQUNBLEdBQUFDLEdBQUFGLEVBQUFHLFVBQUFDLGNBQ0FDLEVBQUFKLEVBQUFFLFVBQUFDLGFBQ0EsT0FBQUYsR0FBQUcsS0FFQUgsRUFBQUcsRUFDQSxFQUNBLEVGN0JBLEdBQUFDLGlCQUFBLFNBQUFDLEdBQ0EsR0FFQUMsR0FDQUMsRUFIQUMsRUFBQUMsbUJBQUFDLE9BQUFDLFNBQUFDLE9BQUFDLFVBQUEsSUFDQUMsRUFBQU4sRUFBQU8sTUFBQSxJQUdBLEtBQUFSLEVBQUEsRUFBQUEsRUFBQU8sRUFBQUUsT0FBQVQsSUFFQSxHQURBRCxFQUFBUSxFQUFBUCxHQUFBUSxNQUFBLEtBQ0FULEVBQUEsS0FBQUQsRUFDQSxNQUFBWSxVQUFBWCxFQUFBLElBQUFBLEVBQUEsSUFXQVksY0FBQSxTQUFBQyxHQUNBLE9BQUFBLEdBQ0EsSUFBQSxNQUNBLE1BQUEsMkJBQ0EsS0FBQSxRQUNBLE1BQUEsNkJBQ0EsS0FBQSxTQUNBLE1BQUEsOEJBQ0EsS0FBQSxZQUNBLE1BQUEsaUNBQ0EsU0FDQSxNQUFBLGtD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QUFBa0QsU0FDQW5ELEtBQUEsU0FBQW1ELEdBUUEsR0FOQUQsRUFBQXhGLE9BQUF5RixFQUFBekYsT0FFQXdGLEVBQUEzQixRQUFBNEIsRUFBQWxFLFNBQUFyQixPQUFBLFNBQUEyRCxHQUNBLE1BQUFBLEdBQUFuRSxLQUFBVSxTQUFBb0csYUFDQSxHQUVBaEIsRUFBQTNCLFFBQUEsQ0FDQSxHQUFBNkMsR0FBQWxCLEVBQUEzQixRQUFBOUMsT0FDQXlFLEdBQUEzQixRQUFBOUMsVUFDQXlFLEVBQUEzRSxTQUFBNEUsRUFBQTVFLFNBQUFYLE9BQUEsU0FBQWEsR0FDQSxNQUFBMkYsR0FBQTVJLFFBQUFzQyxTQUFBVyxFQUFBckIsZUFNQSxJQUFBZ0csR0FBQWxELGFBQUEsTUFDQWtELEdBQ0F2RCxNQUFBLDJCQUFBdUQsR0FBQXBELEtBQUEsU0FBQUMsR0FDQSxNQUFBQSxHQUFBa0QsU0FDQW5ELEtBQUEsU0FBQW1ELEdBQ0FELEVBQUExRCxVQUFBMkQsRUFBQS9ELFdBR0E4RCxFQUFBMUQsVUFBQU0sS0FBQXVELE1BQUFuRCxhQUFBLFVBR0FuRCxjQUFBQSxjQUNBRSxhQUFBQSxhQUNBa0MsV0FBQUEsWUFFQW1FLFFBQ0FDLGtCQUFBLFNBQUFuRyxFQUFBbUMsR0FDQSxHQUFBNkQsR0FBQWxELGFBQUEsTUFDQVosZ0JBQUFsQyxFQUFBbUMsRUFBQTBCLEtBQUF6QixVQUFBNEQiLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qIGVzbGludC1kaXNhYmxlICovXG5cbi8vIHJldHVybiBVUkwgcGFyYW1ldGVycyBmcm9tIFVSTFxudmFyIGdldFVybFBhcmFtZXRlciA9IGZ1bmN0aW9uIGdldFVybFBhcmFtZXRlcihzUGFyYW0pIHtcbiAgdmFyIHNQYWdlVVJMID0gZGVjb2RlVVJJQ29tcG9uZW50KHdpbmRvdy5sb2NhdGlvbi5zZWFyY2guc3Vic3RyaW5nKDEpKSxcbiAgc1VSTFZhcmlhYmxlcyA9IHNQYWdlVVJMLnNwbGl0KCcmJyksXG4gIHNQYXJhbWV0ZXJOYW1lLFxuICBpO1xuICBmb3IgKGkgPSAwOyBpIDwgc1VSTFZhcmlhYmxlcy5sZW5ndGg7IGkrKykge1xuICAgIHNQYXJhbWV0ZXJOYW1lID0gc1VSTFZhcmlhYmxlc1tpXS5zcGxpdCgnPScpO1xuICAgIGlmIChzUGFyYW1ldGVyTmFtZVswXSA9PT0gc1BhcmFtKSB7XG4gICAgICByZXR1cm4gc1BhcmFtZXRlck5hbWVbMV0gPT09IHVuZGVmaW5lZCA/IHRydWUgOiBzUGFyYW1ldGVyTmFtZVsxXTtcbiAgICB9XG4gIH1cbn07XG5cbi8vIGNoZWNrIGlmIHN0YXJ0IHdpdGggaHR0cCBvdSBodHRwc1xuZnVuY3Rpb24gaXNVcmwodXJsKSB7XG4gICByZXR1cm4gL14oZnxodCl0cHM/OlxcL1xcLy9pLnRlc3QodXJsKTtcbn1cblxuLy8gR2V0IHRyYWNrIGNsYXNzIGZvciB0aGUgY2hpcFxudmFyIGdldFRyYWNrQ29sb3IgPSBmdW5jdGlvbiBnZXRUcmFja0NvbG9yKHRyYWNrKSB7XG4gIHN3aXRjaCAodHJhY2spIHtcbiAgICBjYXNlICd3ZWInOlxuICAgICAgcmV0dXJuICdjb2xvci1iZy13ZWIgZGV2ZmVzdC1jaGlwJztcbiAgICBjYXNlICdjbG91ZCc6XG4gICAgICByZXR1cm4gJ2NvbG9yLWJnLWNsb3VkIGRldmZlc3QtY2hpcCc7XG4gICAgY2FzZSAnbW9iaWxlJzpcbiAgICAgIHJldHVybiAnY29sb3ItYmctbW9iaWxlIGRldmZlc3QtY2hpcCc7XG4gICAgY2FzZSAnZGlzY292ZXJ5JzpcbiAgICAgIHJldHVybiAnY29sb3ItYmctZGlzY292ZXJ5IGRldmZlc3QtY2hpcCc7XG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiAnY29sb3ItYmctZGVmYXVsdCBkZXZmZXN0LWNoaXAnO1xuICB9XG59O1xuXG4vLyAgR2V0IHRhbGsgdHlwZSBjbGFzcyBmb3IgdGhlIGNoaXBcbnZhciBnZXRUeXBlQ29sb3IgPSBmdW5jdGlvbiBnZXRUeXBlQ29sb3IodHlwZSkge1xuICBzd2l0Y2ggKHR5cGUpIHtcbiAgICBjYXNlICdjb25mZXJlbmNlJzpcbiAgICAgIHJldHVybiAnY29sb3ItYmctY29uZmVyZW5jZSBkZXZmZXN0LWNoaXAnO1xuICAgIGNhc2UgJ2NvZGVsYWInOlxuICAgICAgcmV0dXJuICdjb2xvci1iZy1jb2RlbGFiIGRldmZlc3QtY2hpcCc7XG4gICAgY2FzZSAncXVpY2tpZSc6XG4gICAgICByZXR1cm4gJ2NvbG9yLWJnLXF1aWNraWUgZGV2ZmVzdC1jaGlwJztcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuICdjb2xvci1iZy1kZWZhdWx0IGRldmZlc3QtY2hpcCc7XG4gIH1cbn07XG5cbi8vIEdldCB0aGUgdGltZSBsYWJlbCBmb2xsb3dpbmcgdGhlIHRhbGsgdHlwZVxudmFyIGdldFRpbWVMYWJlbCA9IGZ1bmN0aW9uIGdldFRpbWVMYWJlbCh0eXBlKSB7XG4gIHN3aXRjaCAodHlwZSkge1xuICAgIGNhc2UgJ2tleW5vdGUnOlxuICAgICAgcmV0dXJuICc1MCBtaW4nO1xuICAgIGNhc2UgJ3JlcGFzJzpcbiAgICAgIHJldHVybiAnMSBoJztcbiAgICBjYXNlICdjb25mZXJlbmNlJzpcbiAgICAgIHJldHVybiAnNTAgbWluJztcbiAgICBjYXNlICdjb2RlbGFiJzpcbiAgICAgIHJldHVybiAnMiBoJztcbiAgICBjYXNlICdxdWlja2llJzpcbiAgICAgIHJldHVybiAnMjAgbWluJztcbiAgICBjYXNlICdhZnRlcic6XG4gICAgICByZXR1cm4gJzEgaCc7XG4gICAgY2FzZSAnY2Fmw6knOlxuICAgICAgcmV0dXJuICcxNSBtaW4nO1xuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gJzUwIG1pbic7XG4gIH1cbn07XG5cbmdldFJvb21MYWJlbCA9IGZ1bmN0aW9uIGdldFJvb21MYWJlbChpZCkge1xuICBzd2l0Y2ggKGlkKSB7XG4gICAgY2FzZSAxOlxuICAgICAgcmV0dXJuIGxhbmd1YWdlID09PSAnZW4nID8gJ1Jvb20gVGl0YW4nIDogJ1NhbGxlIFRpdGFuJztcbiAgICBjYXNlIDI6XG4gICAgICByZXR1cm4gbGFuZ3VhZ2UgPT09ICdlbicgPyAnUm9vbSBCZWxlbScgOiAnU2FsbGUgQmVsZW0nO1xuICAgIGNhc2UgMzpcbiAgICAgIHJldHVybiBsYW5ndWFnZSA9PT0gJ2VuJyA/ICdSb29tIFRvdXIgZGUgQnJldGFnbmUnIDogJ1NhbGxlIFRvdXIgZGUgQnJldGFnbmUnO1xuICAgIGNhc2UgNDpcbiAgICAgIHJldHVybiBsYW5ndWFnZSA9PT0gJ2VuJyA/ICdSb29tIEdyYXNsaW4nIDogJ1NhbGxlIEdyYXNsaW4nO1xuICAgIGNhc2UgNTpcbiAgICAgIHJldHVybiBsYW5ndWFnZSA9PT0gJ2VuJyA/ICdSb29tIExlcyBNYWNoaW5lcycgOiAnU2FsbGUgTGVzIG1hY2hpbmVzJztcbiAgICBjYXNlIDY6XG4gICAgICByZXR1cm4gbGFuZ3VhZ2UgPT09ICdlbicgPyAnUm9vbSBUb3VyIExVJyA6ICdTYWxsZSBUb3VyIExVJztcbiAgICBjYXNlIDc6XG4gICAgICByZXR1cm4gbGFuZ3VhZ2UgPT09ICdlbicgPyAnUm9vbSBsZSBDaMOidGVhdScgOiAnU2FsbGUgbGUgQ2jDonRlYXUnO1xuICAgIGNhc2UgODpcbiAgICAgIHJldHVybiAnTWV6emFuaW5lICYgSGFsbCdcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuICdDaXTDqSBkZXMgY29uZ3LDqHMnXG4gIH1cbn1cblxuLy8gR2V0IHRoZSBkYXkgbGFiZWxcbnZhciBnZXREYXlMYWJlbCA9IGZ1bmN0aW9uIGdldERheUxhYmVsKGRheSkge1xuICBzd2l0Y2ggKGRheSkge1xuICAgIGNhc2UgMjpcbiAgICAgIHJldHVybiBsYW5ndWFnZSA9PT0gJ2VuJyA/ICdUaHVyc2RheSwgTm92ZW1iZXIgMTB0aCcgOiAnSmV1ZGkgMTAgbm92ZW1icmUnO1xuICAgIGNhc2UgMTpcbiAgICAgIHJldHVybiBsYW5ndWFnZSA9PT0gJ2VuJyA/ICdXZWRuZXNkYXksIE5vdmVtYmVyIDl0aCcgOiAnVmVuZHJlZGkgMTAgbWFycyc7XG4gIH1cbn07XG5cbi8vIEdldCB0aGUgaG91ciBsYWJlbFxudmFyIGdldEhvdXJMYWJlbCA9IGZ1bmN0aW9uIGdldEhvdXJMYWJlbChkYXksIGhvdXIsIGFnZW5kYSkge1xuICBzd2l0Y2ggKGRheSkge1xuICAgIGNhc2UgMTpcbiAgICAgIHJldHVybiBhZ2VuZGEuZGF5MS5maWx0ZXIoZnVuY3Rpb24oaCkge1xuICAgICAgICByZXR1cm4gaC5pZCA9PT0gcGFyc2VJbnQoaG91cik7XG4gICAgICB9KVswXS5sYWJlbDtcbiAgICBjYXNlIDI6XG4gICAgcmV0dXJuIGFnZW5kYS5kYXkyLmZpbHRlcihmdW5jdGlvbihoKSB7XG4gICAgICByZXR1cm4gaC5pZCA9PT0gcGFyc2VJbnQoaG91cik7XG4gICAgfSlbMF0ubGFiZWw7XG4gIH1cbn07XG5cbi8vIEdldCB0aGUgZGlmZmljdWx0eSBsYWJlbFxudmFyIGdldERpZmZpY3VsdHlMYWJlbCA9IGZ1bmN0aW9uIGdldERpZmZpY3VsdHlMYWJlbChkaWZmaWN1bHR5KSB7XG4gIHN3aXRjaCAoZGlmZmljdWx0eSkge1xuICAgIGNhc2UgMTpcbiAgICAgIHJldHVybiBsYW5ndWFnZSA9PT0gJ2VuJyA/ICdMZXZlbCBiZWdpbm5lcicgOiAnTml2ZWF1IGTDqWJ1dGFudCdcbiAgICBjYXNlIDI6XG4gICAgICByZXR1cm4gbGFuZ3VhZ2UgPT09ICdlbicgPyAnTGV2ZWwgaW50ZXJtZWRpYXRlJyA6ICdOaXZlYXUgaW50ZXJtw6lkaWFpcmUnXG4gICAgY2FzZSAzOlxuICAgICAgcmV0dXJuIGxhbmd1YWdlID09PSAnZW4nID8gJ0xldmVsIGFkdmFuY2VkJyA6ICdOaXZlYXUgYXZhbmPDqSdcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIGxhbmd1YWdlID09PSAnZW4nID8gJ0xldmVsIGJlZ2lubmVyJyA6ICdOaXZlYXUgZMOpYnV0YW50JyAgXG4gIH1cbn07XG5cbi8vIEdldCB0aGUgbGFuZ3VhZ2UgbGFiZWxcbnZhciBnZXRMYW5nTGFiZWwgPSBmdW5jdGlvbiBnZXRMYW5nTGFiZWwobGFuZykge1xuICBzd2l0Y2ggKGxhbmcpIHtcbiAgICBjYXNlICdlbic6XG4gICAgICByZXR1cm4gbGFuZ3VhZ2UgPT09ICdlbicgPyAnRW5nbGlzaCcgOiAnQW5nbGFpcydcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIGxhbmd1YWdlID09PSAnZW4nID8gJ0ZyZW5jaCcgOiAnRnJhbsOnYWlzJ1xuICB9XG59O1xuXG52YXIgZ2V0U3BlYWtlcnMgPSBmdW5jdGlvbiBnZXRTcGVha2VycyhzcGVha2Vyc0lkLCBzcGVha2Vycykge1xuICB2YXIgbGFiZWwgPSAnJztcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBzcGVha2Vyc0lkLmxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKHNwZWFrZXJzSWQubGVuZ3RoID4gMSAmJiBpID4gMCAmJiBpIDw9IHNwZWFrZXJzSWQubGVuZ3RoIC0gMSkge1xuICAgICAgbGFiZWwgKz0gJyAmICdcbiAgICB9XG4gICAgbGFiZWwgKz0gZ2V0U3BlYWtlcihzcGVha2Vyc0lkW2ldLCBzcGVha2Vycyk7XG4gIH1cbiAgcmV0dXJuIGxhYmVsO1xufVxuXG52YXIgZ2V0U3BlYWtlciA9IGZ1bmN0aW9uIGdldFNwZWFrZXIoaWQsIHNwZWFrZXJzKSB7XG4gIHZhciBzcGVha2VyID0gc3BlYWtlcnMuZmlsdGVyKGZ1bmN0aW9uKHMpIHtcbiAgICByZXR1cm4gcy5pZCA9PT0gaWRcbiAgfSlbMF07XG4gIHJldHVybiBnZXRTcGVha2VyTGFiZWwoc3BlYWtlcilcbn1cblxudmFyIGdldFNwZWFrZXJQaG90byA9IGZ1bmN0aW9uIGdldFNwZWFrZXIoaWQsIHNwZWFrZXJzKSB7XG4gIHZhciBzcGVha2VyID0gc3BlYWtlcnMuZmlsdGVyKGZ1bmN0aW9uKHMpIHtcbiAgICByZXR1cm4gcy5pZCA9PT0gaWRcbiAgfSlbMF07XG4gIHJldHVybiAnL2ltYWdlcy9zcGVha2Vycy8nICsgc3BlYWtlci5waG90bztcbn1cblxudmFyIGdldFNwZWFrZXJMYWJlbCA9IGZ1bmN0aW9uIGdldFNwZWFrZXJMYWJlbChzcGVha2VyKSB7XG4gIHZhciBjb21wYW55ID0gc3BlYWtlci5jb21wYW55ICE9PSBudWxsID8gJyAoJyArIHNwZWFrZXIuY29tcGFueSArICcpJyA6ICcnXG4gIHJldHVybiBzcGVha2VyLmZpcnN0bmFtZSArICcgJyArIHNwZWFrZXIubmFtZSArIGNvbXBhbnk7XG59XG5cbnZhciBnZXRTZXNzaW9uQnlEYXlIb3VyID0gZnVuY3Rpb24gZ2V0U2Vzc2lvbkJ5RGF5SG91cihkYXksIGhvdXIsIHNlc3Npb25zKSB7XG4gIGNvbnN0IHMgPSBzZXNzaW9ucy5maWx0ZXIoZnVuY3Rpb24ocykge1xuICAgIHJldHVybiBzLmFnZW5kYSAmJiBzLmFnZW5kYS5kYXkgPT09IGRheSAmJiBzLmFnZW5kYS5ob3VyID09PSBob3VyXG4gIH0pO1xuICBzLnNvcnQoZnVuY3Rpb24oYSwgYikge1xuICAgIGlmIChhLnR5cGUgPT09ICdjb25mZXJlbmNlJyAmJiBiLnR5cGUgIT09ICdjb25mZXJlbmNlJykge1xuICAgICAgcmV0dXJuIC0xO1xuICAgIH0gZWxzZSBpZiAoYS50eXBlICE9PSAnY29uZmVyZW5jZScgJiYgYi50eXBlID09PSAnY29uZmVyZW5jZScpIHtcbiAgICAgIHJldHVybiAxO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gMDtcbiAgICB9XG4gIH0pO1xuICByZXR1cm4gcztcbn1cblxuLy8gZmF2b3JpdGVzXG52YXIgaXNGYXZvcml0ZSA9IGZ1bmN0aW9uKGlkLCBmYXZzKSB7XG4gIGlmIChmYXZzKSB7XG4gICAgcmV0dXJuIGZhdnMuaW5kZXhPZihpZC50b1N0cmluZygpKSAhPT0gLTFcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxufVxuXG52YXIgdG9nZ2xlRmF2b3JpdGUgPSBmdW5jdGlvbiAoaWQsIGZhdm9yaXRlLCBmYXZvcml0ZXMsIHVzZXJMb2dnZWQpIHtcbiAgdmFyIGluZGV4ID0gZmF2b3JpdGVzLmluZGV4T2YoaWQudG9TdHJpbmcoKSk7XG4gIGlmIChpbmRleCAhPT0gLTEgJiYgIWZhdm9yaXRlKSB7XG4gICAgZmF2b3JpdGVzLnNwbGljZShpbmRleCwgMSk7XG4gIH0gZWxzZSBpZiAoZmF2b3JpdGUpIHtcbiAgICBmYXZvcml0ZXMucHVzaChpZC50b1N0cmluZygpKTtcbiAgfVxuICBpZiAodXNlckxvZ2dlZCkgeyAvLyB3YWl0aW5nIHVzZXIgbG9naW5cbiAgICBmZXRjaCgnL2FwaS92MS9zdGFycy9wdXQ/bG9naW49JyArIHVzZXJMb2dnZWQgKyAnJmZhdnM9JyArIEpTT04uc3RyaW5naWZ5KGZhdm9yaXRlcykpLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHt9KVxuICB9IGVsc2Uge1xuICAgIGxvY2FsU3RvcmFnZVsnZmF2J10gPSBKU09OLnN0cmluZ2lmeShmYXZvcml0ZXMpXG4gIH1cbiAgcmV0dXJuIGZhdm9yaXRlcztcbn1cbiIsIi8qIGVzbGludC1kaXNhYmxlICovXG5jb25zdCBzb2NpYWxDaGlwVGVtcGxhdGUgPVxuJzxzcGFuIGNsYXNzPXt7dGhpcy5nZXRTb2NpYWxDbGFzcyh0eXBlKX19PidcbisgJ3t7eyB0aGlzLmdldFNvY2lhbENvbnRlbnQodHlwZSwgdmFsdWUpIH19fSdcbisgJzwvc3Bhbj4nXG5cbnZhciBTb2NpYWxDaGlwID0gVnVlLmV4dGVuZCh7XG4gIHByb3BzOiB7XG4gICAgdHlwZTogU3RyaW5nLFxuICAgIHZhbHVlOiBTdHJpbmdcbiAgfSxcbiAgdGVtcGxhdGU6IHNvY2lhbENoaXBUZW1wbGF0ZSxcbiAgbWV0aG9kczoge1xuICAgIGdldFNvY2lhbENsYXNzIDogZnVuY3Rpb24gZ2V0U29jaWFsQ2xhc3ModHlwZSkge1xuICAgICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgIGNhc2UgKCd0d2l0dGVyJyk6XG4gICAgICAgICAgcmV0dXJuIFwiZGV2ZmVzdC1jaGlwIGNvbG9yLWJnLXR3aXR0ZXJcIjtcbiAgICAgICAgY2FzZSAoJ2dvb2dsZXBsdXMnKTpcbiAgICAgICAgICByZXR1cm4gXCJkZXZmZXN0LWNoaXAgY29sb3ItYmctZ29vZ2xlcGx1c1wiO1xuICAgICAgICBjYXNlICgnZ2l0aHViJyk6XG4gICAgICAgICAgcmV0dXJuIFwiZGV2ZmVzdC1jaGlwIGNvbG9yLWJnLWdpdGh1YlwiO1xuICAgICAgICBjYXNlICgnbGlua2VkaW4nKTpcbiAgICAgICAgICByZXR1cm4gXCJkZXZmZXN0LWNoaXAgY29sb3ItYmctbGlua2VkaW5cIjtcbiAgICAgICAgY2FzZSAoJ2Jsb2cnKTpcbiAgICAgICAgICByZXR1cm4gXCJkZXZmZXN0LWNoaXAgY29sb3ItYmctYmxvZ1wiO1xuICAgICAgfVxuICAgIH0sXG4gICAgZ2V0U29jaWFsQ29udGVudCA6IGZ1bmN0aW9uIGdldFNvY2lhbENvbnRlbnQodHlwZSwgdmFsdWUpIHtcbiAgICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICBjYXNlICgndHdpdHRlcicpOlxuICAgICAgICAgIHJldHVybiAnPGEgaWQ9XCJkZXZmZXN0LWNoaXBcIiBocmVmPVwiJyArIGNoZWNrTGluayh0eXBlLCB2YWx1ZSkgKyAnXCIgdGFyZ2V0PVwiX05FV1wiPlR3aXR0ZXI8L2E+JztcbiAgICAgICAgY2FzZSAoJ2dvb2dsZXBsdXMnKTpcbiAgICAgICAgICByZXR1cm4gJzxhIGlkPVwiZGV2ZmVzdC1jaGlwXCIgaHJlZj1cIicgKyBjaGVja0xpbmsodHlwZSwgdmFsdWUpICsgJ1wiIHRhcmdldD1cIl9ORVdcIj5HKzwvYT4nO1xuICAgICAgICBjYXNlICgnZ2l0aHViJyk6XG4gICAgICAgICAgcmV0dXJuICc8YSBpZD1cImRldmZlc3QtY2hpcFwiIGhyZWY9XCInICsgY2hlY2tMaW5rKHR5cGUsIHZhbHVlKSArICdcIiB0YXJnZXQ9XCJfTkVXXCI+R2l0SHViPC9hPic7XG4gICAgICAgIGNhc2UgKCdsaW5rZWRpbicpOlxuICAgICAgICAgIHJldHVybiAnPGEgaWQ9XCJkZXZmZXN0LWNoaXBcIiBocmVmPVwiJyArIGNoZWNrTGluayh0eXBlLCB2YWx1ZSkgKyAnXCIgdGFyZ2V0PVwiX05FV1wiPkxpbmtlZGluPC9hPic7XG4gICAgICAgIGNhc2UgKCdibG9nJyk6XG4gICAgICAgICAgcmV0dXJuICc8YSBpZD1cImRldmZlc3QtY2hpcFwiIGhyZWY9XCInICsgY2hlY2tMaW5rKHR5cGUsIHZhbHVlKSArICdcIiB0YXJnZXQ9XCJfTkVXXCI+QmxvZzwvYT4nO1xuICAgICAgfVxuICAgIH1cbiAgfVxufSlcblxuZnVuY3Rpb24gY2hlY2tMaW5rKHR5cGUsIHZhbHVlKSB7XG4gaWYgKHZhbHVlICYmIGlzVXJsKHZhbHVlKSkge1xuICAgcmV0dXJuIHZhbHVlO1xuIH1cbiBpZiAodmFsdWUpIHtcbiAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgY2FzZSAoJ3R3aXR0ZXInKTpcbiAgICAgICAgcmV0dXJuIHZhbHVlLmluZGV4T2YoJ0AnKSA+PSAwID8gJ2h0dHBzOi8vdHdpdHRlci5jb20vJyArIHZhbHVlLnJlcGxhY2UoJ0AnLCAnJykgOiAnaHR0cHM6Ly90d2l0dGVyLmNvbS8nICsgdmFsdWU7XG4gICAgICBjYXNlICgnZ29vZ2xlcGx1cycpOlxuICAgICAgICByZXR1cm4gdmFsdWUuaW5kZXhPZignKycpID49IDAgPyAnaHR0cHM6Ly9wbHVzLmdvb2dsZS5jb20vdS8wLysnICsgdmFsdWUucmVwbGFjZSgnKycsICcnKSA6ICdodHRwczovL3BsdXMuZ29vZ2xlLmNvbS91LzAvKycgKyB2YWx1ZTtcbiAgICAgIGNhc2UgKCdnaXRodWInKTpcbiAgICAgICAgcmV0dXJuICdodHRwczovL2dpdGh1Yi5jb20vJyArIHZhbHVlO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuICc8YSBocmVmPVwiJyArIHZhbHVlICsgJ1wiIHRhcmdldD1cIl9ORVdcIj4nKyB2YWx1ZSArICc8L2E+JztcbiAgICB9XG4gIH1cbn1cblxuVnVlLmNvbXBvbmVudCgnc29jaWFsLWNoaXAnLCBTb2NpYWxDaGlwKVxuIiwiLyogZXNsaW50LWRpc2FibGUgKi9cbnZhciBzcGVha2Vyc1Z1ZSA9IG5ldyBWdWUoe1xuICBlbDogJyNzcGVha2Vyc1Z1ZScsXG4gIGRhdGE6IHtcbiAgICBzcGVha2VyczogbnVsbFxuICB9LFxuXG4gIHJlYWR5OiBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5mZXRjaERhdGEoKVxuICB9LFxuXG4gIG1ldGhvZHM6IHtcblxuICAgIGZldGNoRGF0YTogZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgZmV0Y2goJy9hc3NldHMvZGV2ZmVzdC5qc29uJykudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpO1xuICAgICAgfSkudGhlbihmdW5jdGlvbihqc29uKSB7XG4gICAgICAgIHNlbGYuc3BlYWtlcnMgPSBqc29uLnNwZWFrZXJzLnNvcnQoc29ydEJ5U3BlYWtlck5hbWUpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gIH1cbn0pO1xuXG5mdW5jdGlvbiBzb3J0QnlTcGVha2VyTmFtZShhLGIpIHtcbiB2YXIgbmFtZUE9YS5maXJzdG5hbWUudG9Mb3dlckNhc2UoKTtcbiB2YXIgbmFtZUI9Yi5maXJzdG5hbWUudG9Mb3dlckNhc2UoKTtcbiAgaWYgKG5hbWVBIDwgbmFtZUIpXG4gICAgIHJldHVybiAtMTtcbiAgaWYgKG5hbWVBID4gbmFtZUIpXG4gICAgcmV0dXJuIDE7XG4gIHJldHVybiAwO1xufVxuIiwiLyogZXNsaW50LWRpc2FibGUgKi9cbmNvbnN0IGZhdm9yaXRlVGVtcGxhdGUgPVxuJzxzcGFuIGNsYXNzPVwiZGV2ZmVzdC1mYXZvcml0ZVwiIHYtb246Y2xpY2s9XCJ0b2dnbGVGYXZvcml0ZVwiPidcbisgJzxzcGFuIHYtaWY9XCJhY3RpdmVcIiBjbGFzcz1cImRldmZlc3QtZmF2b3JpdGUtYWN0aXZlXCI+PGkgY2xhc3M9XCJtYXRlcmlhbC1pY29uc1wiPmZhdm9yaXRlPC9pPjwvc3Bhbj4nXG4rICc8c3BhbiB2LWVsc2UgY2xhc3M9XCJkZXZmZXN0LWZhdm9yaXRlLXVuYWN0aXZlXCI+PGkgY2xhc3M9XCJtYXRlcmlhbC1pY29uc1wiPmZhdm9yaXRlX2JvcmRlcjwvaT48L3NwYW4+J1xuKyAnPC9zcGFuPidcblxudmFyIEZhdm9yaXRlID0gVnVlLmV4dGVuZCh7XG4gIHByb3BzOiB7XG4gICAgc2lkOiBOdW1iZXIsXG4gICAgYWN0aXZlIDoge1xuICAgICAgdHlwZTogQm9vbGVhbixcbiAgICAgIGRlZmF1bHQ6IGZhbHNlXG4gICAgfVxuICB9LFxuICB0ZW1wbGF0ZTogZmF2b3JpdGVUZW1wbGF0ZSxcbiAgbWV0aG9kczoge1xuICAgIHRvZ2dsZUZhdm9yaXRlOiBmdW5jdGlvbihldmVudCkge1xuICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICB0aGlzLiRkaXNwYXRjaCgndG9nZ2xlLWZhdm9yaXRlJywgdGhpcy5zaWQsICF0aGlzLmFjdGl2ZSlcbiAgICAgIHRoaXMuYWN0aXZlID0gIXRoaXMuYWN0aXZlO1xuICAgIH1cbiAgfVxufSlcblxuVnVlLmNvbXBvbmVudCgnZmF2b3JpdGUnLCBGYXZvcml0ZSlcbiIsIi8qIGVzbGludC1kaXNhYmxlICovXG5jb25zdCBhZ2VuZGFTbG90VGVtcGxhdGUgPVxuJzxkaXYgY2xhc3M9XCJkZXZmZXN0LWFnZW5kYS1jYXJkXCIgb25DbGljaz1cImxvY2F0aW9uLmhyZWY9XFwnLi9zZXNzaW9uLmh0bWw/aWQ9e3tzZXNzaW9uLmlkfX1cXCc7XCI+J1xuKyAnPGRpdiBjbGFzcz1cImRldmZlc3QtYWdlbmRhLWNhcmQtYXZhdGFycyBtZGwtY2VsbC0taGlkZS1waG9uZVwiPidcbisgJyAgPGltZyB2LWlmPVwic2Vzc2lvbi5pbWFnZVwiIDpzcmM9XCJzZXNzaW9uLmltYWdlXCIgY2xhc3M9XCJkZXZmZXN0LWFnZW5kYS1jYXJkLWltZ1wiIC8+J1xuKyAnICA8aW1nIHYtaWY9XCJzZXNzaW9uLnNwZWFrZXJcIiB2LWZvcj1cInNwZWFrZXIgaW4gc2Vzc2lvbi5zcGVha2VyXCIgOnNyYz1cInRoaXMuZ2V0U3BlYWtlclBob3RvKHNwZWFrZXIsIHRoaXMuJHJvb3Quc3BlYWtlcnMpXCIgY2xhc3M9XCJkZXZmZXN0LWFnZW5kYS1jYXJkLWltZ1wiIC8+J1xuKyAnPC9kaXY+J1xuKyAnPGRpdiBjbGFzcz1cImRldmZlc3QtYWdlbmRhLWNhcmQtY29udGVudFwiPidcbisgJyAgPHNwYW4gY2xhc3M9XCJkZXZmZXN0LWFnZW5kYS1jYXJkLWNvbnRlbnQtc2Vzc2lvbiBtZGwtdHlwb2dyYXBoeS0tZm9udC1saWdodFwiPnt7IHNlc3Npb24ubmFtZSB9fTwvc3Bhbj4nXG4rICcgIDxkaXYgY2xhc3M9XCJkZXZmZXN0LWFnZW5kYS1jYXJkLWNvbnRlbnQtc3BlYWtlciAgbWRsLXR5cG9ncmFwaHktLWZvbnQtbGlnaHRcIiB2LWlmPVwic2Vzc2lvbi5zcGVha2VyXCI+J1xuKyAnICAgIHt7IHRoaXMuZ2V0U3BlYWtlcnMoc2Vzc2lvbi5zcGVha2VyLCB0aGlzLiRyb290LnNwZWFrZXJzKSB9fSdcbisgJyAgPC9kaXY+J1xuKyAnICA8ZGl2IGNsYXNzPVwiZGV2ZmVzdC1hZ2VuZGEtY2FyZC1jb250ZW50LWluZm8tdGFnc1wiPidcbisgJyAgICA8c3BhbiB2LWlmPVwic2Vzc2lvbi50cmFja1wiIGNsYXNzPXt7dGhpcy5nZXRUcmFja0NvbG9yKHNlc3Npb24udHJhY2spfX0+e3sgc2Vzc2lvbi50cmFjayB9fTwvc3Bhbj4nXG4rICcgICAgPHNwYW4gdi1pZj1cInNlc3Npb24udHlwZVwiIGNsYXNzPXt7dGhpcy5nZXRUeXBlQ29sb3Ioc2Vzc2lvbi50eXBlKX19Pnt7IHNlc3Npb24udHlwZSB9fTwvc3Bhbj4nXG4rICcgICAgPHNwYW4gdi1pZj1cInNlc3Npb24udHlwZVwiIGNsYXNzPVwiZGV2ZmVzdC1jaGlwIGNvbG9yLWJnLWRlZmF1bHRcIj57e3RoaXMuZ2V0VGltZUxhYmVsKHNlc3Npb24udHlwZSl9fTwvc3Bhbj4nXG4rICcgIDwvZGl2PidcbisgJzwvZGl2PidcbisgJzxkaXYgc3R5bGU9XCJhbGlnbi1zZWxmOmZsZXgtc3RhcnRcIj48ZmF2b3JpdGUgOnNpZD1cInNlc3Npb24uaWRcIiA6YWN0aXZlPVwiaXNGYXZvcml0ZShzZXNzaW9uLmlkLCBmYXZvcml0ZXMpXCIgPjwvZmF2b3JpdGU+PC9kaXY+J1xuKyAnPC9kaXY+J1xuXG52YXIgQWdlbmRhU2xvdCA9IFZ1ZS5leHRlbmQoe1xuICBwcm9wczoge1xuICAgIGZhdm9yaXRlczogQXJyYXksXG4gICAgc2Vzc2lvbjogT2JqZWN0XG4gIH0sXG4gIHRlbXBsYXRlOiBhZ2VuZGFTbG90VGVtcGxhdGUsXG4gIG1ldGhvZHM6IHtcbiAgICBnZXRUcmFja0NvbG9yOiBnZXRUcmFja0NvbG9yLFxuICAgIGdldFR5cGVDb2xvcjogZ2V0VHlwZUNvbG9yLFxuICAgIGdldFRpbWVMYWJlbDogZ2V0VGltZUxhYmVsLFxuICAgIGdldFNwZWFrZXJzOiBnZXRTcGVha2VycyxcbiAgICBpc0Zhdm9yaXRlOiBpc0Zhdm9yaXRlLFxuICAgIGdldFNwZWFrZXJQaG90bzogZ2V0U3BlYWtlclBob3RvLFxuICAgIGdldFJvb21MYWJlbDogZ2V0Um9vbUxhYmVsXG4gIH1cbn0pXG5cblZ1ZS5jb21wb25lbnQoJ2FnZW5kYS1zbG90JywgQWdlbmRhU2xvdClcbiIsIi8qIGVzbGludC1kaXNhYmxlICovXG5jb25zdCBzZXNzaW9uQ2FyZFRlbXBsYXRlID1cbic8ZGl2IGNsYXNzPVwiZGV2ZmVzdC1zZXNzaW9uLWNhcmQgbWRsLWNvbG9yLS13aGl0ZSBzaGFkb3dMaWdodFwiPidcbisnICA8ZGl2IGNsYXNzPVwiZGV2ZmVzdC1zZXNzaW9uLWNhcmQtdGl0bGVcIj4nXG4rJyAgICA8aDQgdi1pZj1cImRpc3BsYXlUaXRsZVwiIGNsYXNzPVwibWRsLWNhcmRfX3RpdGxlLXRleHRcIj57eyBzZXNzaW9uLm5hbWUgfX08L2g0PidcbisnICAgIDxmYXZvcml0ZSA6c2lkPVwic2Vzc2lvbi5pZFwiIDphY3RpdmU9XCJmYXZcIiA+PC9mYXZvcml0ZT4nXG4rJyAgPC9kaXY+J1xuKycgIDxzcGFuIHYtaWY9XCJkaXNwbGF5VGl0bGVcIiBjbGFzcz17e3RoaXMuZ2V0VHJhY2tDb2xvcihzZXNzaW9uLnRyYWNrKX19Pnt7IHNlc3Npb24udHJhY2sgfX08L3NwYW4+J1xuKycgIDxzcGFuIHYtaWY9XCJzZXNzaW9uLnR5cGVcIiBjbGFzcz17e3RoaXMuZ2V0VHlwZUNvbG9yKHNlc3Npb24udHlwZSl9fT57eyBzZXNzaW9uLnR5cGUgfX08L3NwYW4+J1xuKycgIDxzcGFuIGNsYXNzPVwiZGV2ZmVzdC1jaGlwIGNvbG9yLWJnLWRlZmF1bHRcIj57e3RoaXMuZ2V0RGF5TGFiZWwoc2Vzc2lvbi5hZ2VuZGEuZGF5KX19PC9zcGFuPidcbisnICA8c3BhbiBjbGFzcz1cImRldmZlc3QtY2hpcCBjb2xvci1iZy1kZWZhdWx0XCI+e3t0aGlzLmdldEhvdXJMYWJlbChzZXNzaW9uLmFnZW5kYS5kYXksIHNlc3Npb24uYWdlbmRhLmhvdXIsIGFnZW5kYSl9fTwvc3Bhbj4nXG4rJyAgPHNwYW4gdi1pZj1cInNlc3Npb24uYWdlbmRhLnJvb21cIiBjbGFzcz1cImRldmZlc3QtY2hpcCBjb2xvci1iZy1kZWZhdWx0XCI+e3t0aGlzLmdldFJvb21MYWJlbChzZXNzaW9uLmFnZW5kYS5yb29tKX19PC9zcGFuPidcbisnICA8c3BhbiB2LWlmPVwic2Vzc2lvbi50eXBlXCIgY2xhc3M9XCJkZXZmZXN0LWNoaXAgY29sb3ItYmctZGVmYXVsdFwiPnt7dGhpcy5nZXRUaW1lTGFiZWwoc2Vzc2lvbi50eXBlKX19PC9zcGFuPidcbisnICA8c3BhbiBjbGFzcz1cImRldmZlc3QtY2hpcCBjb2xvci1iZy1kZWZhdWx0XCI+e3t0aGlzLmdldExhbmdMYWJlbChzZXNzaW9uLmxhbmcpfX08L3NwYW4+J1xuKycgIDxzcGFuIHYtaWY9XCJzZXNzaW9uLmRpZmZpY3VsdHlcIiBjbGFzcz1cImRldmZlc3QtY2hpcCBjb2xvci1iZy1kZWZhdWx0XCI+e3t0aGlzLmdldERpZmZpY3VsdHlMYWJlbChzZXNzaW9uLmRpZmZpY3VsdHkpfX08L3NwYW4+J1xuKycgIDxkaXYgY2xhc3M9XCJkZXZmZXN0LXNlc3Npb24tZGVzYyBtZGwtdHlwb2dyYXBoeS0tZm9udC1saWdodFwiPidcbisnICAgIHt7e3Nlc3Npb24uZGVzY3JpcHRpb259fX0nXG4rJyAgPC9kaXY+J1xuKyc8L2Rpdj4nXG5cbnZhciBTZXNzaW9uQ2FyZCA9IFZ1ZS5leHRlbmQoe1xuICBwcm9wczoge1xuICAgIGFnZW5kYTogT2JqZWN0LFxuICAgIHNlc3Npb246IE9iamVjdCxcbiAgICBmYXY6ICB7XG4gICAgICB0eXBlOiBCb29sZWFuLFxuICAgICAgZGVmYXVsdDogZmFsc2VcbiAgICB9LFxuICAgIGRpc3BsYXlUaXRsZToge1xuICAgICAgdHlwZTogQm9vbGVhbixcbiAgICAgIGRlZmF1bHQ6IHRydWVcbiAgICB9XG4gIH0sXG4gIHRlbXBsYXRlOiBzZXNzaW9uQ2FyZFRlbXBsYXRlLFxuICBjb21wb25lbnRzOiB7ICdmYXZvcml0ZSc6IEZhdm9yaXRlIH0sXG4gIG1ldGhvZHM6IHtcbiAgICBnZXRUaW1lTGFiZWw6IGdldFRpbWVMYWJlbCxcbiAgICBnZXREYXlMYWJlbDogZ2V0RGF5TGFiZWwsXG4gICAgZ2V0SG91ckxhYmVsOiBnZXRIb3VyTGFiZWwsXG4gICAgZ2V0VHJhY2tDb2xvcjogZ2V0VHJhY2tDb2xvcixcbiAgICBnZXRUeXBlQ29sb3I6IGdldFR5cGVDb2xvcixcbiAgICBnZXREaWZmaWN1bHR5TGFiZWw6IGdldERpZmZpY3VsdHlMYWJlbCxcbiAgICBnZXRMYW5nTGFiZWw6IGdldExhbmdMYWJlbCxcbiAgICBnZXRSb29tTGFiZWw6IGdldFJvb21MYWJlbFxuICB9XG59KVxuXG5WdWUuY29tcG9uZW50KCdzZXNzaW9uLWNhcmQnLCBTZXNzaW9uQ2FyZClcbiIsIi8qIGVzbGludC1kaXNhYmxlICovXG52YXIgYWdlbmRhVnVlID0gbmV3IFZ1ZSh7XG4gIGVsOiAnI2FnZW5kYVZ1ZScsXG4gIGRhdGE6IHtcbiAgICBkaXNwbGF5ZWRTZXNzaW9uczogbnVsbCxcbiAgICBzZXNzaW9uczogbnVsbCxcbiAgICBzcGVha2VyczogbnVsbCxcbiAgICBhZ2VuZGE6IG51bGwsXG4gICAgZmF2b3JpdGVzOiBbXSxcbiAgICB0eXBlRmlsdGVyczogWydrZXlub3RlJywgJ2NvbmZlcmVuY2UnLCAnY29kZWxhYicsICdxdWlja2llJ10sXG4gICAgY3VyVHlwZUZpbHRlcnM6IFtdLFxuICAgIHRyYWNrRmlsdGVyczogWyd3ZWInLCAnY2xvdWQnLCAnbW9iaWxlJywgJ2Rpc2NvdmVyeSddLFxuICAgIGN1clRyYWNrRmlsdGVyczogW10sXG4gICAgY3VyRmF2b3JpdGVGaWx0ZXI6IFtdLFxuICAgIGRheTE6IGZhbHNlLFxuICAgIGRheTI6IGZhbHNlXG4gIH0sXG5cbiAgcmVhZHk6IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmZldGNoRGF0YSgpXG4gIH0sXG5cbiAgd2F0Y2g6IHtcbiAgICBjdXJUeXBlRmlsdGVyczogJ2ZpbHRlcicsXG4gICAgY3VyVHJhY2tGaWx0ZXJzOiAnZmlsdGVyJyxcbiAgICBjdXJGYXZvcml0ZUZpbHRlcjogJ2ZpbHRlcidcbiAgfSxcblxuICBtZXRob2RzOiB7XG4gICAgZmV0Y2hEYXRhOiBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICBmZXRjaCgnL2Fzc2V0cy9kZXZmZXN0Lmpzb24nKS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7XG4gICAgICB9KS50aGVuKGZ1bmN0aW9uKGpzb24pIHtcbiAgICAgICAgc2VsZi5zZXNzaW9ucyA9IGpzb24uc2Vzc2lvbnM7XG4gICAgICAgIHNlbGYuZGlzcGxheWVkU2Vzc2lvbnMgPSBqc29uLnNlc3Npb25zO1xuICAgICAgICBzZWxmLnNwZWFrZXJzID0ganNvbi5zcGVha2VycztcbiAgICAgICAgc2VsZi5hZ2VuZGEgPSBqc29uLmFnZW5kYTtcbiAgICAgIH0pO1xuXG4gICAgICB2YXIgdXNlcmlkID0gbG9jYWxTdG9yYWdlWyd1c2VyaWQnXTtcbiAgICAgIGlmICh1c2VyaWQpIHtcbiAgICAgICAgZmV0Y2goJy9hcGkvdjEvc3RhcnMvZ2V0P2xvZ2luPScgKyB1c2VyaWQpLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpO1xuICAgICAgICB9KS50aGVuKGZ1bmN0aW9uKGpzb24pIHtcbiAgICAgICAgICBzZWxmLmZhdm9yaXRlcyA9IGpzb24uZmF2cyB8fCBbXTtcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzZWxmLmZhdm9yaXRlcyA9IChsb2NhbFN0b3JhZ2VbJ2ZhdiddICYmIEpTT04ucGFyc2UobG9jYWxTdG9yYWdlWydmYXYnXSkpIHx8IFtdXG4gICAgICB9XG4gICAgfSxcbiAgICBnZXRUeXBlQ29sb3I6IGdldFR5cGVDb2xvcixcbiAgICBnZXRUcmFja0NvbG9yOiBnZXRUcmFja0NvbG9yLFxuICAgIGZpbHRlcjogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICB2YXIgcmVzdWx0ID0gdGhpcy5zZXNzaW9ucztcbiAgICAgIGlmICh0aGlzLmN1clR5cGVGaWx0ZXJzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgcmVzdWx0ID0gcmVzdWx0LmZpbHRlcihmdW5jdGlvbihzZXNzaW9uKSB7XG4gICAgICAgICAgcmV0dXJuIHNlbGYuY3VyVHlwZUZpbHRlcnMuaW5kZXhPZihzZXNzaW9uLnR5cGUpICE9PSAtMVxuICAgICAgICB9KVxuICAgICAgfVxuICAgICAgaWYgKHRoaXMuY3VyVHJhY2tGaWx0ZXJzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgcmVzdWx0ID0gcmVzdWx0LmZpbHRlcihmdW5jdGlvbihzZXNzaW9uKSB7XG4gICAgICAgICAgcmV0dXJuIHNlbGYuY3VyVHJhY2tGaWx0ZXJzLmluZGV4T2Yoc2Vzc2lvbi50cmFjaykgIT09IC0xXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgICBpZiAodGhpcy5jdXJGYXZvcml0ZUZpbHRlci5sZW5ndGggPiAwKSB7XG4gICAgICAgIHJlc3VsdCA9IHJlc3VsdC5maWx0ZXIoZnVuY3Rpb24oc2Vzc2lvbikge1xuICAgICAgICAgIHJldHVybiBzZWxmLmZhdm9yaXRlcy5pbmRleE9mKHNlc3Npb24uaWQudG9TdHJpbmcoKSkgIT09IC0xXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgICB0aGlzLmRpc3BsYXllZFNlc3Npb25zID0gcmVzdWx0O1xuICAgIH1cbiAgfSxcblxuICBldmVudHM6IHtcbiAgICAndG9nZ2xlLWZhdm9yaXRlJzogZnVuY3Rpb24oaWQsIGZhdm9yaXRlKSB7XG4gICAgICB2YXIgdXNlcmlkID0gbG9jYWxTdG9yYWdlWyd1c2VyaWQnXTtcbiAgICAgIHRvZ2dsZUZhdm9yaXRlKGlkLCBmYXZvcml0ZSwgdGhpcy5mYXZvcml0ZXMsIHVzZXJpZClcbiAgICAgIHRoaXMuZmlsdGVyKClcbiAgICB9XG4gIH1cbn0pO1xuIiwiLyogZXNsaW50LWRpc2FibGUgKi9cbmNvbnN0IHNwZWFrZXJDYXJkVGVtcGxhdGUgPVxuJzxkaXYgY2xhc3M9XCJkZXZmZXN0LXNwZWFrZXItY2FyZCBzaGFkb3dMaWdodFwiIHYtb246Y2xpY2s9XCJnb1RvU3BlYWtlclBhZ2UoJGV2ZW50LCBzcGVha2VyLmlkKVwiPidcbisgJzxkaXYgY2xhc3M9XCJtZGwtY2VsbC0taGlkZS1waG9uZVwiPidcbisgJyAgPGltZyB2LWlmPVwic3BlYWtlci5waG90b1wiIDpzcmM9XCJcXCcvaW1hZ2VzL3NwZWFrZXJzL1xcJyArIHNwZWFrZXIucGhvdG9cIiBjbGFzcz1cImRldmZlc3Qtc3BlYWtlci1jYXJkLWltZ1wiIC8+J1xuKyAnPC9kaXY+J1xuKyAnPGRpdiBjbGFzcz1cImRldmZlc3Qtc3BlYWtlci1jYXJkLWNvbnRlbnRcIj4nXG4rICcgIDxkaXYgY2xhc3M9XCJkZXZmZXN0LXNwZWFrZXItY2FyZC10aXRsZVwiPidcbisgJyAgICA8aW1nIHYtaWY9XCJzcGVha2VyLnBob3RvXCIgOnNyYz1cIlxcJy9pbWFnZXMvc3BlYWtlcnMvXFwnICsgc3BlYWtlci5waG90b1wiIGNsYXNzPVwiZGV2ZmVzdC1zcGVha2VyLWNhcmQtaW1nLXNtIG1kbC1jZWxsLS1oaWRlLXRhYmxldCBtZGwtY2VsbC0taGlkZS1kZXNrdG9wXCIgLz4nXG4rICcgICAgPGRpdj4nXG4rICcgICAgICA8aDU+e3sgc3BlYWtlci5maXJzdG5hbWUgfX0ge3sgc3BlYWtlci5uYW1lIH19PC9oNT4nXG4rICcgICAgICA8aDYgdi1pZj1cInNwZWFrZXIuY29tcGFueVwiPnt7IHNwZWFrZXIuY29tcGFueSB9fTwvaDY+J1xuKyAnICAgIDwvZGl2PidcbisgJyAgICA8ZGl2IHN0eWxlPVwicG9zaXRpb246IHJlbGF0aXZlXCI+J1xuKyAnICAgICAgPHNvY2lhbC1jaGlwIHYtaWY9XCJzcGVha2VyLnNvY2lhbC50d2l0dGVyXCIgdHlwZT1cInR3aXR0ZXJcIiA6dmFsdWU9XCJzcGVha2VyLnNvY2lhbC50d2l0dGVyXCI+PC9zb2NpYWwtY2hpcD4nXG4rICcgICAgICA8c29jaWFsLWNoaXAgdi1pZj1cInNwZWFrZXIuc29jaWFsLmdvb2dsZXBsdXNcIiB0eXBlPVwiZ29vZ2xlcGx1c1wiIDp2YWx1ZT1cInNwZWFrZXIuc29jaWFsLmdvb2dsZXBsdXNcIj48L3NvY2lhbC1jaGlwPidcbisgJyAgICAgIDxzb2NpYWwtY2hpcCB2LWlmPVwic3BlYWtlci5zb2NpYWwuZ2l0aHViXCIgdHlwZT1cImdpdGh1YlwiIDp2YWx1ZT1cInNwZWFrZXIuc29jaWFsLmdpdGh1YlwiPjwvc29jaWFsLWNoaXA+J1xuKyAnICAgICAgPHNvY2lhbC1jaGlwIHYtaWY9XCJzcGVha2VyLnNvY2lhbC5saW5rZWRpblwiIHR5cGU9XCJsaW5rZWRpblwiIDp2YWx1ZT1cInNwZWFrZXIuc29jaWFsLmxpbmtlZGluXCI+PC9zb2NpYWwtY2hpcD4nXG4rICcgICAgICA8c29jaWFsLWNoaXAgdi1pZj1cInNwZWFrZXIuc29jaWFsLmJsb2dcIiB0eXBlPVwiYmxvZ1wiIDp2YWx1ZT1cInNwZWFrZXIuc29jaWFsLmJsb2dcIj48L3NvY2lhbC1jaGlwPidcbisgJyAgICA8L2Rpdj4nXG4rICcgIDwvZGl2PidcbisgJyAgPGRpdiBjbGFzcz1cIm1kbC10eXBvZ3JhcGh5LS1mb250LWxpZ2h0XCI+e3t7IHNwZWFrZXIuYmlvIH19fTwvZGl2PidcbisgJzwvZGl2PidcbisgJzwvZGl2PidcblxudmFyIFNwZWFrZXJDYXJkID0gVnVlLmV4dGVuZCh7XG4gIHByb3BzOiB7XG4gICAgc3BlYWtlcjogT2JqZWN0XG4gIH0sXG4gIGNvbXBvbmVudHM6IHsgJ3NvY2lhbC1jaGlwJzogU29jaWFsQ2hpcCB9LFxuICB0ZW1wbGF0ZTogc3BlYWtlckNhcmRUZW1wbGF0ZSxcbiAgbWV0aG9kczoge1xuICAgIGdvVG9TcGVha2VyUGFnZTogZnVuY3Rpb24oZXZlbnQsIGlkKSB7XG4gICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgIGlmIChldmVudC50YXJnZXQuaWQgIT09ICdkZXZmZXN0LWNoaXAnKSB7XG4gICAgICAgIGxvY2F0aW9uLmhyZWY9J3NwZWFrZXIuaHRtbD9pZD0nICsgaWQ7XG4gICAgICB9XG4gICAgfVxuICB9XG59KVxuXG5WdWUuY29tcG9uZW50KCdzcGVha2VyLWNhcmQnLCBTcGVha2VyQ2FyZClcbiIsIi8qIGVzbGludC1kaXNhYmxlICovXG52YXIgc3BlYWtlcklkID0gZ2V0VXJsUGFyYW1ldGVyKCdpZCcpO1xuXG52YXIgc3BlYWtlclZ1ZSA9IG5ldyBWdWUoe1xuICBlbDogJyNzcGVha2VyVnVlJyxcbiAgZGF0YToge1xuICAgIGFnZW5kYTogbnVsbCxcbiAgICBzZXNzaW9uczogbnVsbCxcbiAgICBzcGVha2VyOiBudWxsLFxuICAgIGZhdm9yaXRlczogW11cbiAgfSxcbiAgcmVhZHk6IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmZldGNoRGF0YSgpXG4gIH0sXG4gIG1ldGhvZHM6IHtcbiAgICBmZXRjaERhdGE6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIGZldGNoKCcvYXNzZXRzL2RldmZlc3QuanNvbicpLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKTtcbiAgICAgIH0pLnRoZW4oZnVuY3Rpb24oanNvbikge1xuICAgICAgICAvLyBnZXQgYWdlbmRhXG4gICAgICAgIHNlbGYuYWdlbmRhID0ganNvbi5hZ2VuZGE7XG4gICAgICAgIC8vIGdldCBzcGVha2VyXG4gICAgICAgIHZhciBzcGVha2VyID0ganNvbi5zcGVha2Vycy5maWx0ZXIoZnVuY3Rpb24ocykge1xuICAgICAgICAgIHJldHVybiBzLmlkID09PSBwYXJzZUludChzcGVha2VySWQpO1xuICAgICAgICB9KVswXTtcbiAgICAgICAgc2VsZi5zcGVha2VyID0gc3BlYWtlcjtcbiAgICAgICAgLy8gZ2V0IHNlc3Npb25zXG4gICAgICAgIGlmIChzcGVha2VyKSB7XG4gICAgICAgICAgc2VsZi5zZXNzaW9ucyA9IGpzb24uc2Vzc2lvbnMuZmlsdGVyKGZ1bmN0aW9uKHNlc3Npb24pIHtcbiAgICAgICAgICAgIHJldHVybiBzZXNzaW9uLnNwZWFrZXIgJiYgc2Vzc2lvbi5zcGVha2VyLmluZGV4T2YocGFyc2VJbnQoc3BlYWtlcklkKSkgIT09IC0xXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICB2YXIgdXNlcmlkID0gbG9jYWxTdG9yYWdlWyd1c2VyaWQnXTtcbiAgICAgIGlmICh1c2VyaWQpIHtcbiAgICAgICAgZmV0Y2goJy9hcGkvdjEvc3RhcnMvZ2V0P2xvZ2luPScgKyB1c2VyaWQpLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpO1xuICAgICAgICB9KS50aGVuKGZ1bmN0aW9uKGpzb24pIHtcbiAgICAgICAgICBzZWxmLmZhdm9yaXRlcyA9IGpzb24uZmF2cyB8fCBbXTtcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzZWxmLmZhdm9yaXRlcyA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlWydmYXYnXSkgfHwgW11cbiAgICAgIH1cblxuICAgIH0sXG4gICAgZ2V0VHJhY2tDb2xvcjogZ2V0VHJhY2tDb2xvcixcbiAgICBnZXRUeXBlQ29sb3I6IGdldFR5cGVDb2xvcixcbiAgICBpc0Zhdm9yaXRlOiBpc0Zhdm9yaXRlXG4gIH0sXG4gIGV2ZW50czoge1xuICAgICd0b2dnbGUtZmF2b3JpdGUnOiBmdW5jdGlvbihpZCwgZmF2b3JpdGUpIHtcbiAgICAgIHZhciB1c2VyaWQgPSBsb2NhbFN0b3JhZ2VbJ3VzZXJpZCddO1xuICAgICAgdG9nZ2xlRmF2b3JpdGUoaWQsIGZhdm9yaXRlLCB0aGlzLmZhdm9yaXRlcywgdXNlcmlkKVxuICAgIH1cbiAgfVxufSk7XG4iLCIvKiBlc2xpbnQtZGlzYWJsZSAqL1xudmFyIHNlc3Npb25JZCA9IGdldFVybFBhcmFtZXRlcignaWQnKTtcblxudmFyIHNlc3Npb25WdWUgPSBuZXcgVnVlKHtcbiAgZWw6ICcjc2Vzc2lvblZ1ZScsXG4gIGRhdGE6IHtcbiAgICBhZ2VuZGE6IG51bGwsXG4gICAgc2Vzc2lvbjogbnVsbCxcbiAgICBzcGVha2VyczogbnVsbCxcbiAgICBmYXZvcml0ZXM6IFtdXG4gIH0sXG4gIHJlYWR5OiBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5mZXRjaERhdGEoKVxuICB9LFxuICBtZXRob2RzOiB7XG4gICAgZmV0Y2hEYXRhOiBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICBmZXRjaCgnL2Fzc2V0cy9kZXZmZXN0Lmpzb24nKS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7XG4gICAgICB9KS50aGVuKGZ1bmN0aW9uKGpzb24pIHtcbiAgICAgICAgLy8gZ2V0IGFnZW5kYVxuICAgICAgICBzZWxmLmFnZW5kYSA9IGpzb24uYWdlbmRhO1xuICAgICAgICAvLyBnZXQgc2Vzc2lvblxuICAgICAgICBzZWxmLnNlc3Npb24gPSBqc29uLnNlc3Npb25zLmZpbHRlcihmdW5jdGlvbihzZXNzaW9uKSB7XG4gICAgICAgICAgcmV0dXJuIHNlc3Npb24uaWQgPT09IHBhcnNlSW50KHNlc3Npb25JZCk7XG4gICAgICAgIH0pWzBdO1xuICAgICAgICAvLyBnZXQgc3BlYWtlcnNcbiAgICAgICAgaWYgKHNlbGYuc2Vzc2lvbikge1xuICAgICAgICAgIHZhciBzZXNzaW9uU3BlYWtlcnMgPSBzZWxmLnNlc3Npb24uc3BlYWtlcjtcbiAgICAgICAgICBpZiAoc2VsZi5zZXNzaW9uLnNwZWFrZXIpIHtcbiAgICAgICAgICAgIHNlbGYuc3BlYWtlcnMgPSBqc29uLnNwZWFrZXJzLmZpbHRlcihmdW5jdGlvbihzcGVha2VyKSB7XG4gICAgICAgICAgICAgIHJldHVybiBzZXNzaW9uU3BlYWtlcnMuaW5kZXhPZihwYXJzZUludChzcGVha2VyLmlkKSkgIT09IC0xIDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIHZhciB1c2VyaWQgPSBsb2NhbFN0b3JhZ2VbJ3VzZXJpZCddO1xuICAgICAgaWYgKHVzZXJpZCkge1xuICAgICAgICBmZXRjaCgnL2FwaS92MS9zdGFycy9nZXQ/bG9naW49JyArIHVzZXJpZCkudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7XG4gICAgICAgIH0pLnRoZW4oZnVuY3Rpb24oanNvbikge1xuICAgICAgICAgIHNlbGYuZmF2b3JpdGVzID0ganNvbi5mYXZzIHx8IFtdO1xuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNlbGYuZmF2b3JpdGVzID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2VbJ2ZhdiddKSB8fCBbXVxuICAgICAgfVxuICAgIH0sXG4gICAgZ2V0VHJhY2tDb2xvcjogZ2V0VHJhY2tDb2xvcixcbiAgICBnZXRUeXBlQ29sb3I6IGdldFR5cGVDb2xvcixcbiAgICBpc0Zhdm9yaXRlOiBpc0Zhdm9yaXRlXG4gIH0sXG4gIGV2ZW50czoge1xuICAgICd0b2dnbGUtZmF2b3JpdGUnOiBmdW5jdGlvbihpZCwgZmF2b3JpdGUpIHtcbiAgICAgIHZhciB1c2VyaWQgPSBsb2NhbFN0b3JhZ2VbJ3VzZXJpZCddO1xuICAgICAgdG9nZ2xlRmF2b3JpdGUoaWQsIGZhdm9yaXRlLCB0aGlzLmZhdm9yaXRlcywgdXNlcmlkKVxuICAgIH1cbiAgfVxufSk7XG4iXX0=
